{% extends "admin/import_export/base.html" %}
{% load admin_urls i18n static %}

{% comment %}
  Template for showing export results.

  * Display status and allow downloading file
  * If data contains errors show traceback
{% endcomment %}

{% block extrahead %}
  {{ block.super }}
  <script type="text/javascript" src="{% static 'admin/js/vendor/jquery/jquery.js' %}"></script>
  <script type="text/javascript" src="{% static 'admin/js/jquery.init.js' %}"></script>
  <script type="text/javascript" src="{% static 'import_export_extensions/js/admin/admin.js' %}"></script>
{% endblock extrahead %}

{% block breadcrumbs_last %}
  <a href="{% url opts|admin_urlname:'export' %}?{{ request.GET.urlencode }}">
    {% translate "Export" %}
  </a>
  &rsaquo; {% translate "Export results" %}
{% endblock breadcrumbs_last %}

{% block content %}
  {% block export_results %}
    {% if export_job.export_status == 'EXPORT_ERROR' %}
      <h2>
        {% translate "There are some errors during data exporting:" %}
      </h2>
      <div class="error">
        {{ export_job.error_message }}
        {% if debug %}
          <div class="traceback">{{ export_job.traceback|linebreaks }}</div>
        {% endif %}
      </div>
    {% endif %}
    {% if export_job.export_status == 'EXPORTED' %}
      <h2>
        {% translate "You can download exported data with following link" %}
      </h2>
      <a href="{{ export_job.data_file.url }}" id="data_file">Download export data</a>
    {% endif %}
  {% endblock export_results %}
{% endblock content %}
